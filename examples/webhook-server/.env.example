# ============================================================================
# AURA WEBHOOK SERVER CONFIGURATION
# ============================================================================
#
# This file contains environment variables for the Aura Webhook Server.
# Copy this file to .env and customize for your environment.
#
# SECURITY WARNING: Never commit .env to version control!
# ============================================================================

# ----------------------------------------------------------------------------
# SERVER CONFIGURATION
# ----------------------------------------------------------------------------

# Port the server listens on
# Default: 3000
# Production: Use reverse proxy (nginx/caddy) on port 80/443
PORT=3000

# Node environment
# Options: development, production, test
# Production: Set to 'production' for optimized performance and security
NODE_ENV=development

# ----------------------------------------------------------------------------
# WEBHOOK SECURITY
# ----------------------------------------------------------------------------

# Webhook secret for HMAC-SHA256 signature verification
# CRITICAL: Change this in production!
# Generate: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# Or run: npm run generate:secret
WEBHOOK_SECRET=your-webhook-secret-key-change-this-in-production

# Admin API key for destructive operations (delete old events, etc.)
# Generate: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# Leave empty to disable admin endpoints
ADMIN_API_KEY=

# ----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# ----------------------------------------------------------------------------

# Path to SQLite database file
# Docker: Use /app/data/webhooks.db for volume persistence
# Local: Use ./data/webhooks.db
DATABASE_PATH=./data/webhooks.db

# ----------------------------------------------------------------------------
# RATE LIMITING
# ----------------------------------------------------------------------------

# Time window for rate limiting (in milliseconds)
# Default: 900000 (15 minutes)
# Common values:
#   - 60000 = 1 minute
#   - 300000 = 5 minutes
#   - 900000 = 15 minutes
#   - 3600000 = 1 hour
RATE_LIMIT_WINDOW_MS=900000

# Maximum requests per IP within the time window
# Default: 100 requests per window
# Adjust based on expected webhook volume
# Production: Start conservative, increase as needed
RATE_LIMIT_MAX_REQUESTS=100

# ----------------------------------------------------------------------------
# IP ALLOWLISTING
# ----------------------------------------------------------------------------

# Comma-separated list of allowed IP addresses
# Empty = Allow all IPs (development only!)
# Production: Restrict to Aura Network IPs only
# Example: ALLOWED_IPS=192.168.1.100,10.0.0.50,172.16.0.1
ALLOWED_IPS=

# ----------------------------------------------------------------------------
# LOGGING CONFIGURATION
# ----------------------------------------------------------------------------

# Logging level
# Options: error, warn, info, debug
# Production: Use 'info' or 'warn'
# Development: Use 'debug' for detailed logs
# Troubleshooting: Use 'debug'
LOG_LEVEL=info

# Path to log file
# Logs are automatically rotated (max 5MB per file, 5 files kept)
# Docker: Use /app/logs/webhook-server.log for volume persistence
LOG_FILE_PATH=./logs/webhook-server.log

# ----------------------------------------------------------------------------
# AURA NETWORK CONFIGURATION (OPTIONAL)
# ----------------------------------------------------------------------------

# Aura Network RPC endpoint
# Used if you need to query the blockchain directly
AURA_RPC_ENDPOINT=https://testnet-rpc.aurablockchain.org

# Aura Network gRPC endpoint
# Used for advanced blockchain queries
AURA_GRPC_ENDPOINT=https://rpc.aurablockchain.org

# ----------------------------------------------------------------------------
# ADVANCED CONFIGURATION (OPTIONAL)
# ----------------------------------------------------------------------------

# Custom CORS origins (comma-separated)
# Leave empty to disable CORS
# Example: CORS_ORIGINS=https://app.example.com,https://admin.example.com
CORS_ORIGINS=

# Request timeout in milliseconds
# Default: 30000 (30 seconds)
REQUEST_TIMEOUT=30000

# Maximum request body size
# Default: 1mb
# Increase if webhook payloads are large
MAX_BODY_SIZE=1mb

# ============================================================================
# PRODUCTION CHECKLIST
# ============================================================================
#
# Before deploying to production, ensure:
#
# [ ] WEBHOOK_SECRET is a strong, randomly generated secret
# [ ] ADMIN_API_KEY is set and secure
# [ ] NODE_ENV is set to 'production'
# [ ] ALLOWED_IPS restricts access to Aura Network IPs
# [ ] LOG_LEVEL is set to 'info' or 'warn'
# [ ] Rate limiting is configured appropriately
# [ ] Database path uses persistent storage
# [ ] HTTPS is configured (via reverse proxy)
# [ ] Monitoring and alerts are set up
# [ ] Backup strategy is in place
#
# ============================================================================
